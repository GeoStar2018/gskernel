package unittest;

import static org.junit.Assert.*;

import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

import com.geostar.kernel.*;

public class coordtrans {

	@BeforeClass
	public static void setUpBeforeClass() throws Exception {
		System.loadLibrary("gsjavaport");
		GsKernel.Initialize();
		System.out.println("loadlibrary succeed");
		
		System.out.println("coordtrans");
		String strCurDir = System.getProperty("user.dir");
		strCurDir+="/../data/coordinatesystem/EPSG.txt";
		GsGlobeConfig.Instance().Child("Kernel/SpatialRererence/EPSG").Value(strCurDir);
	}

	@AfterClass
	public static void tearDownAfterClass() throws Exception {
	}

	@Before
	public void setUp() throws Exception {
	}

	@After
	public void tearDown() throws Exception {
	}

	@Test
	public void PLANE4Param()
	{ 
		System.out.println("PLANE4ParamTest");
		int srcEPSG = 2360;
		int targetEPSG = 4524;
		double[] sourcePoints = {36590405.0511,3351529.3730,1085.6975,36587811.4492,3351592.8277,1073.3695,36590853.3447,3351638.3663,1075.5065,36588925.1413,3351711.1922,1073.0075,36589561.1570,3351779.5352,1074.1085,36588043.6048,3351978.7439,1073.9395,36590247.0110,3352244.4763,1068.1955,36590688.9841,3352553.3323,1075.2985,36588859.8064,3352597.7914,1072.2525,36587685.3914,3352802.0963,1081.0395,36589491.6288,3352901.4517,1078.3215,36589036.7276,3353025.5747,1072.3385,36588206.9239,3353079.1279,1073.7795,36587825.9399,3353444.1621,1071.9865,36590600.5878,3353519.5999,1079.2675,36589013.5537,3353692.1934,1100.5445,36588251.6563,3353711.6590,1081.1375,36589413.6916,3353728.0189,1081.0735,36590136.0189,3353973.9857,1081.6545};
		double[] targetPoints = {36590519.769,3351534.961,1085.698,36587926.158,3351598.415,1073.370,36590968.065,3351643.954,1075.507,36589039.854,3351716.780,1073.008,36589675.872,3351785.123,1074.109,36588158.315,3351984.332,1073.940,36590361.729,3352250.066,1068.196,36590803.703,3352558.924,1075.299,36588974.519,3352603.382,1072.253,36587800.100,3352807.688,1081.040,36589606.344,3352907.044,1078.322,36589151.441,3353031.167,1072.339,36588321.634,3353084.720,1073.780,36587940.649,3353449.756,1071.987,36590715.306,3353525.195,1079.268,36589128.266,3353697.788,1100.545,36588366.366,3353717.254,1081.138,36589528.406,3353733.614,1081.074,36590250.736,3353979.582,1081.655};

		GsSpatialReference sr = new GsSpatialReference(srcEPSG);
		GsSpatialReference tar = new GsSpatialReference(targetEPSG);
		
		double[] param = new double[4];
		GsCoordinateTransformationFactory.ComputePlane4Parameter(19, 3, sourcePoints, targetPoints, param);
		System.out.println(param[0]);
		System.out.println(param[1]);
		System.out.println(param[2]);
		System.out.println(param[3]);

	}

	@Test
	public void MOLODENSKYParam()
	{ 
		System.out.println("MOLODENSKYParamTest");
		int srcEPSG = 2360;
		int targetEPSG = 4524;
		double[] sourcePoints = {36590405.0511,3351529.3730,1085.6975,36587811.4492,3351592.8277,1073.3695,36590853.3447,3351638.3663,1075.5065,36588925.1413,3351711.1922,1073.0075,36589561.1570,3351779.5352,1074.1085,36588043.6048,3351978.7439,1073.9395,36590247.0110,3352244.4763,1068.1955,36590688.9841,3352553.3323,1075.2985,36588859.8064,3352597.7914,1072.2525,36587685.3914,3352802.0963,1081.0395,36589491.6288,3352901.4517,1078.3215,36589036.7276,3353025.5747,1072.3385,36588206.9239,3353079.1279,1073.7795,36587825.9399,3353444.1621,1071.9865,36590600.5878,3353519.5999,1079.2675,36589013.5537,3353692.1934,1100.5445,36588251.6563,3353711.6590,1081.1375,36589413.6916,3353728.0189,1081.0735,36590136.0189,3353973.9857,1081.6545};
		double[] targetPoints = {36590519.769,3351534.961,1085.698,36587926.158,3351598.415,1073.370,36590968.065,3351643.954,1075.507,36589039.854,3351716.780,1073.008,36589675.872,3351785.123,1074.109,36588158.315,3351984.332,1073.940,36590361.729,3352250.066,1068.196,36590803.703,3352558.924,1075.299,36588974.519,3352603.382,1072.253,36587800.100,3352807.688,1081.040,36589606.344,3352907.044,1078.322,36589151.441,3353031.167,1072.339,36588321.634,3353084.720,1073.780,36587940.649,3353449.756,1071.987,36590715.306,3353525.195,1079.268,36589128.266,3353697.788,1100.545,36588366.366,3353717.254,1081.138,36589528.406,3353733.614,1081.074,36590250.736,3353979.582,1081.655};

		GsSpatialReference sr = new GsSpatialReference(srcEPSG);
		GsSpatialReference tar = new GsSpatialReference(targetEPSG);
		
		double[] param = new double[7];
		double[] p = {0,0,0};
		GsCoordinateTransformationFactory.ComputeMolodenskyParameter(sr, tar, 19, 3, sourcePoints, targetPoints, param, p);
		System.out.println(param[0]);
		System.out.println(param[1]);
		System.out.println(param[2]);
		System.out.println(param[3]);
		System.out.println(param[4]);
		System.out.println(param[5]);
		System.out.println(param[6]);

	}
}
