拓扑检查调用流程

	bool Progress(GsTopologyRuleValidator*, const char* log, int a, int b, float c)
	{
		std::cout << log << a << b << c << std::endl;
		return true;
	}
	
	bool OnPropareProgress(float b)
	{
		return true;
	}
	
	void test()
	{
		GsTopologyCheckAnalysisPtr ptrTc = new GsTopologyCheckAnalysis();
	
		//拓扑预处理, 预处理将生成临时文件GsAnalysisDataIO ,通过向Preprocesser拿数据再去做拓扑规则检查
		GsTopologyCheckPreprocesserPtr ptrPrepareTop = ptrTc->CreatePreprocesser(0.000001);
		
		//直接加入地物类
		GsFeatureClassPtr ptrFcs1 = ...//打开一个数据源
		ptrPrepareTop->Add(ptrFcs1);
	
		//通过 GsAnalysisDataIO 加入.GsAnalysisDataIO为定义一套接口可以读写数据,具有数据源无关性,任何语言实现的数据源
		//只要通过此接口向IO输入数据将会做拓扑检查
		GsFeatureClassPtr ptrFcs2 = ...//打开一个数据源
		GsSpatialQueryFilterPtr pQuery = new GsSpatialQueryFilter();
		GsAnalysisDataIOAgentPtr pIOAgent = GeoStar::Kernel::GsSpatialAnalysisUtility::CreateAnalysisDataIO(ptrFcs2, pQuery);
		ptrPrepareTop->Add(pIOAgent->Ptr());
		ptrPrepareTop->OnProgress.Add(&OnPropareProgress);
		bool bok = ptrPrepareTop->Preprocess();
	
		//创建拓扑检查规则
		GsTopologyRuleValidatorPtr ptrCheckRule = ptrTc->CreateTopologyRule(GsTopologyRuleType::eTRT_LineNoDangles, 0.001);	
		//预处理的数据加入到拓扑验证,如果不进行拓扑预处理,可以直接加入IO数据
		ptrCheckRule->AddData(ptrPrepareTop->Result(0)->Ptr());
	
		GeoStar::Kernel::GsFeatureClassPtr mfd_Fcs= ...//打开一个数据源
		FeatureClassWrtier writer(mfd_Fcs);//FeatureClassWrtier为实现了GsAnalysisDataIO的类
		ptrCheckRule->OutputData(&writer);
		ptrCheckRule->Tolerance(0.000001);
		ptrCheckRule->OnValidateProgress.Add(&Progress);
		//执行拓扑验证
		GsTopologyRuleValidateResult result =  ptrCheckRule->ValidateRule();
	}